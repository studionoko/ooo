<script>
  import { tick } from 'svelte'
  import { Router, Route, Link, navigate } from 'svelte-routing'

  import Stamps from './sketches/stamps/index.svelte'
  import Swirls from './sketches/swirls/index.svelte'
  import Warp from './sketches/warp/index.svelte'

  const sketches = [
    Swirls,
    Stamps,
    Warp,
  ]

  let current
  let url

  const refresh = async () => {
    const curUrl = window.location.pathname
    navigate('/refresh')
    await tick()
    navigate(curUrl)
  }

</script>

<Router {url}>
  <main>
    <Route path="/" component={Swirls}/>
    {#each sketches as sketch}
      <Route path={`sketch/${sketch.meta.name.toLowerCase()}`}>
        <svelte:component this={sketch} bind:this={current}/>
      </Route>
    {/each}
  </main>
  <nav class="nav">
    {#each sketches as sketch}
      <Link class="link" to={`sketch/${sketch.meta.name.toLowerCase()}`}>{ sketch.meta.name }</Link>
    {/each}
  </nav>


  <svg on:click={refresh} class="refresh" width="500" height="500" viewBox="0 0 500 500" fill="none">
    <path d="M250 478.74C376.33 478.74 478.74 376.33 478.74 250C478.74 189.53 455.275 134.541 416.955 93.6401V151.203H395.694V59.284H487.613V80.5441H433.808C474.899 125.093 500 184.615 500 250C500 388.071 388.071 500 250 500C206.49 500 165.576 488.885 129.943 469.339V444.738C164.84 466.298 205.967 478.74 250 478.74Z" fill="black"/>
    <path d="M81.7947 405.014C44.2148 364.257 21.2601 309.809 21.2601 250C21.2601 123.67 123.67 21.2601 250 21.2601C293.508 21.2601 334.179 33.4073 368.807 54.4953V29.9795C333.468 10.857 293.002 0 250 0C111.929 0 0 111.929 0 250C0 314.775 24.6347 373.796 65.0463 418.205H11.136V439.465H103.055V347.547H81.7947V405.014Z" fill="black"/>
  </svg>

  <svg on:click|stopPropagation={current.clear} class="refresh refresh--clear" width="500" height="500" viewBox="0 0 500 500" fill="none">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M264.853 250L492.219 22.6338L477.366 7.78082L250 235.147L22.6338 7.78076L7.78087 22.6337L235.147 250L7.78087 477.366L22.6338 492.219L250 264.853L477.366 492.219L492.219 477.366L264.853 250Z" fill="black"/>
  </svg>

  <div class="logo">
    <Link to="/">
      <svg width="500" height="500" viewBox="0 0 500 500" fill="none">
      	<g>
      	  <circle cx="250" cy="250" r="236.5" stroke="black" stroke-width="21.0052"/>
      	  <path d="M346.589 346.589C299.464 393.715 245.77 424.627 197.469 436.871C148.918 449.178 107.832 442.293 82.7695 417.231C57.7073 392.168 50.8219 351.082 63.1292 302.531C75.3731 254.23 106.285 200.536 153.411 153.411C200.536 106.285 254.23 75.3731 302.532 63.1291C351.083 50.8219 392.168 57.7073 417.231 82.7695C442.293 107.832 449.178 148.918 436.871 197.469C424.627 245.77 393.715 299.464 346.589 346.589Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M219.031 280.969C171.172 233.109 132.338 185.735 108.197 147.989C96.0797 129.043 87.9809 113.01 84.1378 100.849C82.2121 94.7549 81.5355 90.1857 81.6494 87.0053C81.7607 83.8976 82.5676 82.9714 82.7695 82.7695C82.9715 82.5675 83.8976 81.7607 87.0053 81.6494C90.1858 81.5355 94.7549 82.2121 100.849 84.1378C113.01 87.9809 129.043 96.0797 147.989 108.197C185.735 132.338 233.109 171.172 280.969 219.031C328.828 266.891 367.662 314.265 391.803 352.011C403.92 370.957 412.019 386.99 415.862 399.151C417.788 405.245 418.465 409.814 418.351 412.995C418.239 416.102 417.432 417.029 417.231 417.231C417.029 417.432 416.102 418.239 412.995 418.351C409.814 418.465 405.245 417.788 399.151 415.862C386.99 412.019 370.957 403.92 352.011 391.803C314.265 367.662 266.891 328.828 219.031 280.969Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M15.2073 484.793L484.793 15.2073" stroke="black" stroke-width="21.0052"/>
      	</g>
      </svg>
      <svg width="500" height="500" viewBox="0 0 500 500" fill="none">
      	<g>
      	  <circle cx="250" cy="250" r="236.5" stroke="black" stroke-width="21.0052"/>
      	  <path d="M346.589 346.589C299.464 393.715 245.77 424.627 197.469 436.871C148.918 449.178 107.832 442.293 82.7695 417.231C57.7073 392.168 50.8219 351.082 63.1292 302.531C75.3731 254.23 106.285 200.536 153.411 153.411C200.536 106.285 254.23 75.3731 302.532 63.1291C351.083 50.8219 392.168 57.7073 417.231 82.7695C442.293 107.832 449.178 148.918 436.871 197.469C424.627 245.77 393.715 299.464 346.589 346.589Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M219.031 280.969C171.172 233.109 132.338 185.735 108.197 147.989C96.0797 129.043 87.9809 113.01 84.1378 100.849C82.2121 94.7549 81.5355 90.1857 81.6494 87.0053C81.7607 83.8976 82.5676 82.9714 82.7695 82.7695C82.9715 82.5675 83.8976 81.7607 87.0053 81.6494C90.1858 81.5355 94.7549 82.2121 100.849 84.1378C113.01 87.9809 129.043 96.0797 147.989 108.197C185.735 132.338 233.109 171.172 280.969 219.031C328.828 266.891 367.662 314.265 391.803 352.011C403.92 370.957 412.019 386.99 415.862 399.151C417.788 405.245 418.465 409.814 418.351 412.995C418.239 416.102 417.432 417.029 417.231 417.231C417.029 417.432 416.102 418.239 412.995 418.351C409.814 418.465 405.245 417.788 399.151 415.862C386.99 412.019 370.957 403.92 352.011 391.803C314.265 367.662 266.891 328.828 219.031 280.969Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M15.2073 484.793L484.793 15.2073" stroke="black" stroke-width="21.0052"/>
      	</g>
      </svg>
      <svg width="500" height="500" viewBox="0 0 500 500" fill="none">
      	<g>
      	  <circle cx="250" cy="250" r="236.5" stroke="black" stroke-width="21.0052"/>
      	  <path d="M346.589 346.589C299.464 393.715 245.77 424.627 197.469 436.871C148.918 449.178 107.832 442.293 82.7695 417.231C57.7073 392.168 50.8219 351.082 63.1292 302.531C75.3731 254.23 106.285 200.536 153.411 153.411C200.536 106.285 254.23 75.3731 302.532 63.1291C351.083 50.8219 392.168 57.7073 417.231 82.7695C442.293 107.832 449.178 148.918 436.871 197.469C424.627 245.77 393.715 299.464 346.589 346.589Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M219.031 280.969C171.172 233.109 132.338 185.735 108.197 147.989C96.0797 129.043 87.9809 113.01 84.1378 100.849C82.2121 94.7549 81.5355 90.1857 81.6494 87.0053C81.7607 83.8976 82.5676 82.9714 82.7695 82.7695C82.9715 82.5675 83.8976 81.7607 87.0053 81.6494C90.1858 81.5355 94.7549 82.2121 100.849 84.1378C113.01 87.9809 129.043 96.0797 147.989 108.197C185.735 132.338 233.109 171.172 280.969 219.031C328.828 266.891 367.662 314.265 391.803 352.011C403.92 370.957 412.019 386.99 415.862 399.151C417.788 405.245 418.465 409.814 418.351 412.995C418.239 416.102 417.432 417.029 417.231 417.231C417.029 417.432 416.102 418.239 412.995 418.351C409.814 418.465 405.245 417.788 399.151 415.862C386.99 412.019 370.957 403.92 352.011 391.803C314.265 367.662 266.891 328.828 219.031 280.969Z" stroke="black" stroke-width="21.0052"/>
      	  <path d="M15.2073 484.793L484.793 15.2073" stroke="black" stroke-width="21.0052"/>
      	</g>
      </svg>
    </Link>
  </div>
</Router>
